<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/reset.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <title>자금관리</title>
  <script>
      $(document).ready(function(){
        var id;
        var list = [];
                var v3;
                if(location.search != ""){              //url가져옴

                           var param = location.search.replace("?",""); // ?뒤로자름
                           //console.log(param);
                           var params = param.split("&");
                           //console.log(params);
                           var row = {};
                           for(var i = 0; i < params.length; i++){
                               var map = params[i].split("=");
                               row[map[0]] = (((decodeURI(map[1]))));
                           }
                           //console.log(row);

                            if(localStorage.getItem("list")==null) {
                            console.log("데이터없음");
                           } else {
                              list=JSON.parse(localStorage.getItem("list"));
                           }


                           list[list.length] = row;
                           localStorage.setItem("list", JSON.stringify(list));
                           //location.search = "";

                          /* $.ajax({
                             url:"/m3/index.json",
                             dataType : "json",
                            method : "POST",
                             data: {json :  JSON.stringify(list)},

                           }).done(function(data){
                             data.no="1";
                             console.log(data.no);
                           }).fail(function(data,b,c){
                             data.no=2;
                             console.log(data,b,c);
                           });*/
                           $.post("index.json",
                              {
                                name: "Donald Duck",
                                city: "Duckburg"
                              },
                              function(data, status){
                                alert("Data: " + data + "\nStatus: " + status);
                              });

                       }


        $(location.hash).css("display","block");
        $(location.hash).html();
        id=location.hash;
        $(window).on("popstate", function(e) {
          console.log(location.hash);
          $(id).css("display","none");
          id = location.hash;//$(this).attr("href");
          $(id).css("display","block");
          $(location.hash).html();
        });

        //var url = $(this).attr("url");

         $("li").click(function(e){
              //var url = $(this).attr("url");
             //history.replaceState(null, null, location.hash);

             e.preventDefault();
             location.hash = $(this).children("a").attr("href");
             $(id).css("display","none");
             id = location.hash;//$(this).attr("href");
             $(id).css("display","block");
             $(location.hash).html();

              if($("li").index(this)==0) {
                  var v1=JSON.parse(localStorage.getItem("list"));

                  var v="";
                  var v3;
                  v="<table><tr><td>구분</td><td>발생기간</td><td>금액</td><td>항목</td><td>거래처</td><td>수정</td><td>삭제</td></tr>"

                  for(var i=0;i<v1.length;i++) {
                      //v3=list[i]["#title"];
                      v+="<tr><td>"+v1[i]["no"]+"</td><td>"+v1[i]["time"]+"</td><td>"+
                      v1[i]["money"]+"</td><td>"+v1[i]["content"]+"</td><td>"+v1[i]["target"]+
                      "</td><td>수정</td><td>삭제</td></tr><input id=\"cb\" type=\"checkbox\" name=\"chk_info\" value=\"del\">";
                      //console.log(v);
                  }
                  $("#c1").html(function(i,origtext){
                      v+="</table>"
                      return v;
                  });
                  v+="</table>"

              }
             if($("li").index(this)==1) {
               //console.log($("p").index().val());
              /* $.ajax({
                 url:"/m3/index.json"
                 , dataType : 'html',
                 type : 'GET',
                 data: {no:"1"}
               }).done(function(data){
                 data.no=1;
                 console.log(data.no);
               }).fail(function(data,b,c){
                 data.no=2;
                 console.log(data.no,b,c);
               });*/
             }
         });

         $("form").submit(function(){
            //location.reload();
         });

      });
  </script>
</head>
<body>
  <div class="m1">
    <div class="m2">
    <a href="index.html"><h3>자금관리</h3></a>
    </div>
    <div class="m2">
    <a href="index2.html"><h3>예산관리</h3></a>
    </div>
  </div>
  <nav>
    <ul>
      <!--<li url="index1_1.html">자금계획관리</a></li><br>
      <li url="index1_2.html">자금계획등록</a></li><br>
      <li url="index1_3.html">월별자금변동</a></li>
      <li><a href="index1_1.html">자금계획관리</a></li><br>
      <li><a href="index1_2.html">자금계획등록</a></li><br>
      <li><a href="index1_3.html">월별자금변동</a></li>-->
      <li><a href="#c1">자금계획관리</a></li><br>
      <li><a href="#c2">자금계획등록</a></li><br>
      <li><a href="#c3">월별자금변동</a></li>
    </ul>
  </nav>
  <section id="c1">
    <table>
      <tr>
        <td>구분</td>
        <td>발생기간</td>
        <td>금액</td>
        <td>항목</td>
        <td>거래처</td>
        <td>수정</td>
        <td>삭제</td>
      </tr>
    </table>
  </section>
  <section id="c2">
    <div class="i1">
      <form action="index.html">
        <p>구분&nbsp;&nbsp;&nbsp&nbsp&nbsp&nbsp:<input name="no" type="text" placeholder="구분"></p>
        <p>발생기간:<input name="time" type="text" placeholder="구분"></p>
        <p>금액&nbsp;&nbsp;&nbsp&nbsp&nbsp:     <input name="money" type="text" placeholder="구분"></p>
        <p>항목&nbsp;&nbsp;&nbsp&nbsp&nbsp:     <input name="content" type="text" placeholder="구분"></p>
        <p>거래처&nbsp;&nbsp;&nbsp:<input name="target" type="text" placeholder="구분"></p>
        <input type="submit" value="저장" style="width: 60px; height:30px">
        <input type="submit" value="취소" style="width: 60px; height : 30px">
      </form>
    </div>
  </section>
  <section id="c3">
    <table>
      <tr>
        <td>구분</td>
        <td>발생기간</td>
        <td>금액</td>
        <td>실적</td>
      </tr>
    </table>
  </section>
</body>
</html>
